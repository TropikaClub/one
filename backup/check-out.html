<!DOCTYPE html>
<html>
<head>
	<title></title>
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
	<title>Merchant Page</title>
  <!-- UAT -->
	<!-- <script src="https://uat2.enets.sg/GW2/js/jquery-3.1.1.min.js" type="text/javascript"></script>
	<script src="https://uat2.enets.sg/GW2/pluginpages/env.jsp"></script>
	<script type="text/javascript" src="https://uat2.enets.sg/GW2/js/apps.js"></script> -->
  <!-- PROD -->
  <script src="https://www2.enets.sg/GW2/js/jquery-3.1.1.min.js" type="text/javascript"></script>
  <script src="https://www2.enets.sg/GW2/pluginpages/env.jsp"></script>
  <script type="text/javascript" src="https://www2.enets.sg/GW2/js/apps.js"></script>
</head>
<body>
  <input type="hidden" id="txnReq" name="txnReq" value="">
  <input type="hidden" id="keyId" name="keyId" value="">
  <input type="hidden" id="hmac" name="hmac" value="">
  <div id="anotherSection">
    <fieldset>
      <div id="ajaxResponse"></div>
    </fieldset>
  </div>
<script>
  window.onload = function() {
  	$.urlParam = function(name){
      var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
      return results[1] || 0;
    }
    console.log(decodeURIComponent($.urlParam('payload')));

    var payload = JSON.parse(decodeURIComponent($.urlParam('payload')));
    var txnReq = JSON.stringify(payload.txnReq);
    var keyId = payload.keyId;
    var hmac = payload.hmac;

    // console.log(txnReq);
    // console.log(keyId);
    // console.log(hmac);

    // var txnReq = document.forms[0].txnReq.value;
    // var keyId = document.forms[0].keyId.value; // once api key is available,                       assign a value
    // var hmac = document.forms[0].hmac.value; // once hmac is available, assign a value
    sendPayLoad(txnReq, hmac, keyId);
  };
</script>

</body>
</html>